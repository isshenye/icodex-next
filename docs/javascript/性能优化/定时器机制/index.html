<!doctype html>
<html class="docs-version-current" lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="icodex RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="icodex Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-153188913-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-153188913-1",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="icodex" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">å®šæ—¶å™¨ | icodex</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://icodex.me/docs/javascript/æ€§èƒ½ä¼˜åŒ–/å®šæ—¶å™¨æœºåˆ¶"><meta data-react-helmet="true" name="docsearch:language" content="zh-CN"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="keywords" content="frontend, react, javascript, css, react, vue, typescript, docusaurus, blog, personal blog, personal website"><meta data-react-helmet="true" property="og:title" content="å®šæ—¶å™¨ | icodex"><meta data-react-helmet="true" name="description" content="Timers"><meta data-react-helmet="true" property="og:description" content="Timers"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://icodex.me/docs/javascript/æ€§èƒ½ä¼˜åŒ–/å®šæ—¶å™¨æœºåˆ¶"><link data-react-helmet="true" rel="alternate" href="https://icodex.me/docs/javascript/æ€§èƒ½ä¼˜åŒ–/å®šæ—¶å™¨æœºåˆ¶" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://icodex.me/docs/javascript/æ€§èƒ½ä¼˜åŒ–/å®šæ—¶å™¨æœºåˆ¶" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://GMKEEJO8X4-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.83facce5.css">
<link rel="preload" href="/assets/js/runtime~main.bc1968d0.js" as="script">
<link rel="preload" href="/assets/js/main.84a75bf0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="icodex" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="icodex" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">icodex</b></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a class="navbar__item navbar__link" href="/pages/project">My Project</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link">Skill</a><ul class="dropdown__menu"><li><a class="dropdown__link navbar__link--active" href="/docs/javascript/ç±»å‹/ç±»å‹å®šä¹‰">JavaScript</a></li><li><a class="dropdown__link" href="/docs/css/CSSä»£ç è§„èŒƒ">CSS</a></li><li><a class="dropdown__link" href="/docs/typescript/tsconfig">TypeScript</a></li><li><a class="dropdown__link" href="/docs/react/hooks/å¸¸ç”¨hooks">React</a></li><li><a class="dropdown__link" href="/docs/nodejs/awesome-nodejs">NodeJS</a></li><li><a class="dropdown__link" href="/docs/engineer/">Engineer</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/network/ç½‘é€Ÿä¸å¸¦å®½">Network</a></li><li><a class="dropdown__link" href="/docs/algorithm/ç®—æ³•åˆ†æ">Algorithm</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/tools/git">Tool</a><a href="https://github.com/wood3n/icodex-next" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0 sidebarWithHideableNavbar_VlPv"><a tabindex="-1" class="sidebarLogo_hmkv" href="/"><img src="/img/logo.png" alt="icodex" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="icodex" class="themedImage_TMUO themedImage--dark_uzRr"><b>icodex</b></a><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/javascript/DOM/MutationObserver">DOM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/javascript/Date/Dateç±»å‹">Date</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/javascript/Number/Numberç±»å‹">Number</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/javascript/Object/JS é‡Œçš„é¢å‘å¯¹è±¡">Object</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/javascript/RegExp/RegExpç±»å‹">RegExp</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/javascript/Runtime/JSçš„å†…å­˜ç®¡ç†">Runtime</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/javascript/String/Stringç±»å‹">String</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/javascript/å‡½æ•°/Functionç±»å‹">å‡½æ•°</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/javascript/æ€§èƒ½ä¼˜åŒ–/å®šæ—¶å™¨æœºåˆ¶">æ€§èƒ½ä¼˜åŒ–</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/javascript/æ€§èƒ½ä¼˜åŒ–/å®šæ—¶å™¨æœºåˆ¶">å®šæ—¶å™¨</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/javascript/ç±»å‹/æ“ä½œç¬¦ç±»å‹è½¬æ¢">ç±»å‹</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>å®šæ—¶å™¨</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="timers">Timers<a class="hash-link" href="#timers" title="Direct link to heading">â€‹</a></h2><blockquote><p><a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timers" target="_blank" rel="noopener noreferrer">Timers</a></p></blockquote><p>è¯¸å¦‚<code>setTimeout</code>ï¼Œ<code>setInterval</code>å±äºå®šæ—¶å™¨ç±»å‹çš„ä»»åŠ¡ç±»å‹ï¼Œåœ¨é¡µé¢äº‹ä»¶å¾ªç¯çš„æœºåˆ¶ä¸­ï¼Œå®šæ—¶å™¨ç±»å‹çš„ä»»åŠ¡æœ€ç»ˆä¹Ÿä¼šè¢«æ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­å»å¤„ç†ã€‚</p><p>ä» whatwg è§„èŒƒå®šä¹‰çš„å†…å®¹æ¥çœ‹ï¼Œæ— è®ºæ˜¯<code>setTimeout</code>è¿˜æ˜¯<code>setInterval</code>éƒ½ä¼šç»è¿‡ä¸€ä¸ªåˆå§‹åŒ–å®šæ—¶å™¨çš„æ­¥éª¤ï¼Œå¹¶ä¸”å®ƒä»¬ä¿©ç”¨çš„éƒ½æ˜¯åŒä¸€å¥—ç®—æ³•ï¼ŒåŒä¸€ä¸ªå®šæ—¶å™¨ä»»åŠ¡åˆ—è¡¨ï¼Œè§ â€”â€” <a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timer-initialisation-steps" target="_blank" rel="noopener noreferrer">timer-initialisation-steps</a>ï¼Œå¤§è‡´çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li><p>å¦‚æœæä¾›äº†<code>previous handle</code>ï¼Œåˆ™è®©å½“å‰å®šæ—¶ä»»åŠ¡çš„<code>handle</code>ï¼ˆ<code>handle</code>å°±æ˜¯å½“å‰å®šæ—¶ä»»åŠ¡çš„ Idï¼‰ç­‰äº<code>previous handle</code>ï¼›å¦‚æœæ²¡æœ‰ï¼Œå–ä¸€ä¸ªå¤§äº 0 çš„æ•´æ•°æ¥ä½œä¸º<code>handle</code>ï¼Œå¹¶åœ¨å®šæ—¶å™¨ä»»åŠ¡åˆ—è¡¨ï¼ˆ<strong>list of active timers</strong>ï¼‰ä¸­æ·»åŠ ä¸€æ¡è®°å½•ï¼›</p></li><li><p>å‡†å¤‡å°†å›è°ƒå‡½æ•°æ‰§è¡Œå°è£…æˆä¸€ä¸ªä»»åŠ¡ï¼š</p><ul><li>å¦‚æœå½“å‰å®šæ—¶å™¨ä»»åŠ¡åˆ—è¡¨ä¸­æ­¤<code>handle</code>çš„ä»»åŠ¡å·²ç»è¢«æ¸…é™¤ï¼Œé‚£ä¹ˆå°±ç»ˆæ­¢ç®—æ³•è¿‡ç¨‹ï¼›</li><li>åœ¨ä»»åŠ¡ä¸­è°ƒç”¨å›è°ƒå‡½æ•°</li><li>åˆ¤æ–­å½“å‰é‡å¤æ‰§è¡Œçš„æ ‡è®°ä½ï¼ˆrepeat flagï¼‰ï¼Œå¦‚æœä¸º true åˆ™å›å¤´è°ƒç”¨è¿™ä¸ªç®—æ³•ï¼›</li></ul></li><li><p>è®¾ç½®<code>timeout</code></p></li><li><p>åˆ¤æ–­ä»»åŠ¡é˜Ÿåˆ—ä¸­<code>currently running task</code>æ˜¯å¦æ˜¯ä¹‹å‰è®¾å®šè¿‡çš„å®šæ—¶ä»»åŠ¡ï¼Œå¦‚æœæ˜¯çš„è¯è®¾ç½®åµŒå¥—çº§åˆ«<code>nesting level</code>ç­‰äº<code>currently running task</code>çš„<code>timer nesting level</code>ï¼Œå¦‚æœä¸æ˜¯åˆ™è®¾ç½®åµŒå¥—çº§åˆ«<code>nesting level</code>ç­‰äº 0ï¼›</p></li><li><p>å¦‚æœ<code>timeout</code>å°äº 0ï¼Œè®¾ç½®<code>timeout</code>ç­‰äº 0ï¼›å¦‚æœåµŒå¥—çº§åˆ«<code>nesting level</code>å¤§äº 5ï¼Œè®¾ç½®<code>timeout</code>ç­‰äº 4</p></li><li><p>è®©<code>nesting level += 1</code>ï¼›</p></li><li><p>è®©å½“å‰å®šæ—¶ä»»åŠ¡çš„<code>timer nesting level</code> ç­‰äº<code>nesting level</code>ï¼›</p></li><li><p>è¿”å›<code>handle</code>ï¼Œç„¶åç»§ç»­<strong>å¹¶è¡Œè¿è¡Œæ­¤ç®—æ³•</strong>ï¼›</p></li><li><p>ç­‰å¾…å»¶è¿Ÿæ—¶é—´ç»“æŸï¼Œå°†å®šæ—¶ä»»åŠ¡æ’åˆ—åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­å»æ‰§è¡Œã€‚</p></li></ul><p>ä»æµè§ˆå™¨å¼•æ“çš„è§’åº¦æ¥çœ‹ï¼Œå®é™…ä¸Šè¿˜ä¼šå­˜åœ¨ä¸€ç§å»¶è¿Ÿæ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—<a href="https://source.chromium.org/chromium/chromium/src/+/master:base/task/sequence_manager/task_queue_impl.h;bpv=1;bpt=1;l=308?gsn=DelayedIncomingQueue&amp;gs=kythe%3A%2F%2Fchromium.googlesource.com%2Fchromium%2Fsrc%3Flang%3Dc%2B%2B%3Fpath%3Dsrc%2Fbase%2Ftask%2Fsequence_manager%2Ftask_queue_impl.h%23RkefcvcqCdse2BLt2fciB2l5hG6ZWMxHY9xBzquPyXE" target="_blank" rel="noopener noreferrer">DelayedIncomingQueue</a>ï¼Œç”¨äºä¿å­˜å®šæ—¶å™¨ä»»åŠ¡ã€‚ä¸»çº¿ç¨‹åœ¨æ‰§è¡Œ JS çš„è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°<code>setTimeout</code>ä¹‹ç±»çš„å®šæ—¶å™¨ï¼Œä¼šæ ¹æ®å…¶å›è°ƒå‡½æ•°å’Œå½“å‰å‘èµ·<code>setTimeout</code>çš„æ—¶é—´ï¼Œä»¥åŠå»¶è¿Ÿæ‰§è¡Œçš„æ—¶é—´å»åˆ›å»ºä¸€ä¸ªå›è°ƒä»»åŠ¡ï¼Œä¿å­˜åˆ°å»¶è¿Ÿæ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç„¶åç»§ç»­æ‰§è¡Œå½“å‰ä»»åŠ¡ã€‚åœ¨ç­‰å¾…<code>setTimeout</code>ä¸­è®¾ç½®çš„å»¶è¿Ÿä»¥åï¼Œå°±ä¼šå°†å»¶è¿Ÿé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡å–å‡ºå¹¶æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­å»ç­‰å¾…æ‰§è¡Œã€‚</p><p>å¦‚æœåœ¨å»¶è¿Ÿé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡å°šæœªæ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨<code>clearTimeout</code>ä»å»¶è¿Ÿé˜Ÿåˆ—ä¸­åˆ é™¤ä»»åŠ¡ã€‚</p><p><img alt="image-20200821182409351" src="/assets/images/image-20200821182409351-16412000000497-8ea567c52c11072b9f4f9b174208b8cc.png"></p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="in-parallel">in parallel<a class="hash-link" href="#in-parallel" title="Direct link to heading">â€‹</a></h3><blockquote><p><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" target="_blank" rel="noopener noreferrer">whatwg - in-parallel</a></p></blockquote><p>å¹¶è¡Œè¿è¡ŒæŒ‡çš„æ˜¯ï¼ŒæŸä¸€ä¸ªç®—æ³•ä¸è§„èŒƒä¸­å®šä¹‰çš„å…¶å®ƒç®—æ³•ä¼šåŒæ—¶è¿è¡Œï¼Œè€Œä¸æ˜¯ç®—æ³•ä¸­çš„æ­¥éª¤ä¼šå¹¶è¡Œè¿è¡Œï¼Œç®—æ³•ä¸­çš„æ­¥éª¤ä»ç„¶ä¼šä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æŒ‰é¡ºåºæ‰§è¡Œã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¦ç«‹å³è¿è¡Œçš„æ“ä½œå¿…é¡»ä¸­æ–­ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ currently running taskï¼Œå…ˆæ‰§è¡Œå®ƒï¼Œç„¶åå†æ¢å¤ä¹‹å‰çš„ currently running taskã€‚</p><p>ä¸ºäº†é¿å…ä¸åŒçš„å¹¶è¡Œè¿è¡Œçš„ç®—æ³•åœ¨æ“ä½œç›¸åŒæ•°æ®æ—¶å‘ç”Ÿç«äº‰å…³ç³»ï¼ˆ race conditions ï¼‰ï¼Œä¼šä½¿ç”¨ä¸€ä¸ªå¹¶è¡Œé˜Ÿåˆ—ã€‚å¹¶è¡Œé˜Ÿåˆ—å…·æœ‰ä¸€ä¸ªç®—æ³•é˜Ÿåˆ—ï¼Œç®—æ³•é˜Ÿåˆ—ä¸­çš„æ­¥éª¤å¿…é¡»è¿ç»­ä¸€ä¸ªæ¥ä¸€ä¸ªçš„æŒ‰é¡ºåºæ‰§è¡Œã€‚</p><p>å°†æ‰§è¡Œæ­¥éª¤æ”¾å…¥å¹¶è¡Œé˜Ÿåˆ—ä¸­ï¼Œå°±æ˜¯å°†æ­¥éª¤æ’åˆ—åˆ°ç®—æ³•é˜Ÿåˆ—ä¸­å»æ‰§è¡Œã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="settimeout">setTimeout<a class="hash-link" href="#settimeout" title="Direct link to heading">â€‹</a></h3><blockquote><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout" target="_blank" rel="noopener noreferrer">MDN - setTimeout</a></p></blockquote><p><code>setTimeout</code>çš„è¯­æ³•æœ‰ä¸¤ç§ï¼š</p><blockquote><p><code>setTimeout(handler, timeout, [arguments... ])</code></p><p>handlerï¼šå›è°ƒå‡½æ•°</p><p>timeoutï¼šæ¯«ç§’æ•°</p><p>argumentsï¼šä¼ é€’ç»™ handler function çš„å‚æ•°</p><p>è¿”å›ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºå½“å‰è®¡æ—¶å™¨çš„ Idï¼Œå¯ä»¥ä½¿ç”¨<code>clearTimeout()</code>æ–¹æ³•æ¥æ ¹æ® Id æ¸…é™¤æŸä¸ªè®¡æ—¶å™¨</p></blockquote><blockquote><p><code>setTimeout(code, timeout)</code></p><p>codeï¼š ä¸€ä¸²ä»£ç å­—ç¬¦ä¸²</p><p>timeoutï¼šæ¯«ç§’æ•°</p><p>ä¸æ¨èè¿™ç§å½¢å¼çš„å›è°ƒï¼Œä¸€æ–¹é¢ï¼Œå­—ç¬¦ä¸²å½¢å¼çš„ä»£ç éœ€è¦äºŒæ¬¡è§£ææˆå¯æ‰§è¡Œä»£ç ï¼Œå¦ä¸€æ–¹é¢ï¼Œè¿™ç§å½¢å¼å®¹æ˜“å¸¦æ¥å’Œ<code>eval()</code>ä¸€æ ·çš„å®‰å…¨é£é™©</p></blockquote><p>å…³äº<code>setTimeout</code>éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>timeout æ˜¯æ¯«ç§’æ•°ï¼Œä¹Ÿå°±æ˜¯ç§’ä¹˜ä»¥ 1000ï¼Œå¹¶ä¸”å½“ timeout è®¾ç½®å°äº 0 æ—¶ï¼Œä¼šè¢«æŒ‰ç…§ 0 å¤„ç†ï¼›</li><li>timeout è®¾ç½®çš„å»¶è¿Ÿæ—¶é—´ä¸æ˜¯ç»è¿‡è¯¥æ—¶é—´å°±ç²¾ç¡®æ‰§è¡Œçš„æ—¶é—´ï¼Œè¦ç®—ä¸Š CPU å»¶è¿Ÿå’Œä»»åŠ¡é˜Ÿåˆ—ç­‰å¾…æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´ï¼›ä¹Ÿå°±æ˜¯è®¾ç½® timeout = 0ï¼Œä¹Ÿè¿˜æ˜¯ä¼šå¯¼è‡´å…¶ä¸€å®šç¨‹åº¦çš„å»¶è¿Ÿæ‰§è¡Œï¼›</li><li>æ ¹æ® whatwg è§„èŒƒçš„å®šä¹‰ï¼Œ<code>setTimeout</code>å¯ä»¥åµŒå¥—è°ƒç”¨ï¼Œä½†æ˜¯å½“åµŒå¥—äº”æ¬¡ä»¥åï¼Œæ‰§è¡Œå›è°ƒçš„é—´éš”æ—¶é—´å°†ä¼šè¢«èŠ‚æµåˆ°è‡³å°‘ 4msï¼Œè§ â€”â€” <a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timers" target="_blank" rel="noopener noreferrer">whatwg - timers</a>éƒ¨åˆ†çš„ Noteï¼›</li></ul><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">cb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img alt="image-20200820161521104" src="/assets/images/image-20200820161521104-164111526865021-997bbf65c3e8d57ac5099c630b98a7e4.png"></p><ul><li>è€Œå¯¹äºæœªæ¿€æ´»çš„æµè§ˆå™¨æ ‡ç­¾é¡µé¢å†…çš„å®šæ—¶å™¨ï¼Œä¹Ÿå°†ä¼šè¢«èŠ‚æµï¼Œæœ€å°æ‰§è¡Œå›è°ƒçš„é—´éš”æ—¶é—´ä¸º 1000msï¼›</li><li>å»¶è¿Ÿæ‰§è¡Œæ—¶é—´çš„ä¿å­˜ä½¿ç”¨ 32 ä¸ª bit æ¥å­˜å‚¨ï¼Œå…¶ä¸­è¿˜æœ‰ä¸€ä¸ªç¬¦å·ä½ï¼Œä¹Ÿå°±æ˜¯å»¶è¿Ÿæ‰§è¡Œçš„æœ€å¤§è®¾ç½®æ—¶é—´åªèƒ½åˆ° 2^31 - 1 = <code>2147483647</code>msï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œå°±ç›¸å½“äºæ˜¯ 0 æ¥çœ‹å¾…ï¼›</li><li>æœ€åå€¼å¾—æ³¨æ„çš„å°±æ˜¯åœ¨<code>setTimeout</code>ä¸­ä¼ å…¥çš„å›è°ƒå‡½æ•°ä¼šå‘ç”Ÿ<code>this</code>æŒ‡å‘å˜åŒ–çš„é—®é¢˜ï¼Œè¿™ä¸ªåœ¨ä½œç”¨åŸŸçš„ä»‹ç»é‡Œå·²ç»è§£é‡Šè¿‡äº†ï¼Œä¸€èˆ¬è§£å†³æ–¹å¼æ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°æˆ–è€…ä½¿ç”¨<code>bind</code>ã€‚</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="ç”¨-settimeout-å®ç°-setinterval">ç”¨ setTimeout å®ç° setInterval<a class="hash-link" href="#ç”¨-settimeout-å®ç°-setinterval" title="Direct link to heading">â€‹</a></h3><p>ä¸Šæ–‡è¯´è¿‡ï¼Œ<code>setTimeout</code>å’Œ<code>setInterval</code>ç”¨çš„æ˜¯åŒä¸€ä¸ª<strong>list of active timers</strong>ï¼Œå¹¶ä¸”ç®—æ³•æ­¥éª¤ä¹ŸåŸºæœ¬ä¸€æ ·ã€‚æ‰€ä»¥å®Œå…¨å¯ä»¥ç”¨<code>setTimeout</code>å®ç°ä¸€ä¸ª<code>setInterval</code>ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°é€’å½’çš„æ–¹å¼ï¼Œå³åœ¨<code>setTimeout</code>å›è°ƒä¸­å†æ¬¡è°ƒç”¨å‡½æ•°ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">_setInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">fn</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> timeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">_setInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> timeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> timeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">test</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">_setInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">test</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä½†æ˜¯è¿™ç§æ–¹å¼è®¾ç½®çš„<code>setInterval</code>æ²¡æ³•æ¸…é™¤å•Šï¼Œè¿™å¾€ä¸‹èµ°è‚¯å®šå¥”ç€å†…å­˜æ³„æ¼å»äº†ï¼Œå¯ä»¥åˆ©ç”¨ Chromium é‚£ä¸ªå»¶è¿Ÿé˜Ÿåˆ—çš„æ–¹å¼æ¥åšï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ªæ•°ç»„ç”¨æ¥ä¿å­˜ interval çš„ä»»åŠ¡ï¼›</li><li>æ¯æ¬¡ä½¿ç”¨<code>setTimeout</code>æ¥åˆ›å»ºå»¶è¿Ÿä»»åŠ¡çš„æ—¶å€™ï¼Œå…ˆæ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨å½“å‰ interval çš„ Idï¼Œå¦‚æœå­˜åœ¨å°±è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼Œå¹¶ä¸”åœ¨å›è°ƒä¸­å†æ¬¡è°ƒç”¨<code>setTimeout</code>åˆ›å»ºä¸‹ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼›</li><li>æ ¹æ® Id æ¸…é™¤<code>setInterval</code>ä»»åŠ¡çš„æ—¶å€™ï¼Œåˆ é™¤æ•°ç»„ä¸­ç›¸åº”çš„å…ƒç´ å³å¯ï¼›</li><li>æœ€åè®¾ç½®<code>setInterval</code>çš„æ—¶å€™ï¼Œéœ€è¦æœ€åæ›´æ–°ä¸€ä¸‹å…¨å±€ interval çš„ Idï¼Œè¿™æ ·ä¿è¯ä¸‹ä¸€æ¬¡è®¾ç½®çš„<code>setInterval</code>ä¸ä¼šé‡å¤</li></ul><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> delayStack </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> id </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">_setInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">fn</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> timeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> intervalId </span><span class="token operator">=</span><span class="token plain"> id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> interval </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    id</span><span class="token operator">:</span><span class="token plain"> intervalId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    func</span><span class="token operator">:</span><span class="token plain"> fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  delayStack</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">interval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">_fn</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">delayStack</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">find</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">item</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> intervalId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">_fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> timeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">_fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  id</span><span class="token operator">++</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">_clearInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">clearId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> index </span><span class="token operator">=</span><span class="token plain"> delayStack</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">findIndex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">item</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> clearId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  delayStack</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">splice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">index</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="é˜²æŠ–">é˜²æŠ–<a class="hash-link" href="#é˜²æŠ–" title="Direct link to heading">â€‹</a></h3><blockquote><p><a href="https://www.lodashjs.com/docs/lodash.debounce" target="_blank" rel="noopener noreferrer">lodash.debounce</a></p><p><a href="https://github.com/jashkenas/underscore/blob/master/modules/debounce.js" target="_blank" rel="noopener noreferrer">underscore - debounce</a></p></blockquote><p>æœ€åˆæ¥è§¦å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°çš„éœ€æ±‚ï¼Œæ˜¯åœ¨å‰ç«¯å°è£… React ç»„ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œå½“æ—¶æ˜¯è¦å®ç°ä¸€ä¸ªæœç´¢ä¸‹æ‹‰æ¡†ï¼Œæ ¹æ®è¾“å…¥æç¤ºæœç´¢å†…å®¹ã€‚æ ¹æ®<code>&lt;input&gt;</code>çš„<code>input</code>äº‹ä»¶æ¥ç›‘å¬ç”¨æˆ·è¾“å…¥ï¼Œå¹¶è°ƒç”¨åç«¯æ¥å£ä¼ é€’è¾“å…¥ä¿¡æ¯æ¥è·å–æç¤ºä¿¡æ¯ï¼ˆå®é™…ä¸Šè¦å®ç°æ›´å¥½çš„æœç´¢è¾“å…¥æç¤ºç¡®å®éœ€è¦è€ƒè™‘å¾ˆå¤šæƒ…å†µï¼Œè¿™é‡Œåªè€ƒè™‘åˆ©ç”¨é˜²æŠ–æ¥æ§åˆ¶æ¥å£è°ƒç”¨çš„å®ç°ï¼‰ã€‚</p><div class="playgroundContainer_g1X1"><div class="playgroundHeader_nN+J">Live Editor</div><div class="playgroundEditor_smcs" style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace;color:#F8F8F2;background-color:#282A36"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false">class extends Component {
  state = {
    text: &quot;&quot;,
  };

  handleInput = (e) =&gt; {
    this.setState({
      text: e.target.value,
    });
  };

  render() {
    return (
      &lt;div&gt;
        &lt;input onInput={this.handleInput} /&gt;
        &lt;p&gt;{this.state.text}&lt;/p&gt;
      &lt;/div&gt;
    );
  }
}</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">extends</span><span class="token plain"> Component </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  state </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    text</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">handleInput</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setState</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      text</span><span class="token operator">:</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">render</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">input</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">onInput</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">handleInput</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">p</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">text</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">p</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></pre><style>
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div><div class="playgroundHeader_nN+J">Result</div><div class="playgroundPreview_tBjT"><div>Loading...</div></div></div><p>æŠ–åŠ¨ï¼ˆbounceï¼‰å…¶å®æ¥æºäºç”µè·¯ä¸­çš„åè¯ â€”â€” <a href="https://zh.wikipedia.org/wiki/%E9%96%8B%E9%97%9C#%E6%8E%A5%E9%BB%9E%E5%BD%88%E8%B7%B3(bounce)" target="_blank" rel="noopener noreferrer">æ¥ç‚¹å¼¹è·³</a>ï¼Œå¤§æ¦‚å°±æ˜¯å¼€å…³æ¥è§¦çš„æ—¶å€™å‘å‡ºçš„è¿ç»­çš„ç”µæµä¿¡å·ä¼šå¯¹ç”µè·¯é€ æˆå½±å“ï¼Œé€šè¿‡&quot;å»å¼¹è·³&quot;ï¼ˆdebounceï¼‰æ¥åˆå¹¶ç”µæµä¿¡å·çš„å‘å‡ºï¼Œé¿å…å¯¹ç”µè·¯äº§ç”Ÿå½±å“ã€‚</p><p>è¡ç”Ÿåˆ°å‰ç«¯é¢†åŸŸï¼Œå¯ä»¥ç†è§£é¡µé¢åœ¨è¿ç»­è¯·æ±‚åç«¯æ¥å£çš„è¿‡ç¨‹ä¸­ï¼Œå‰ç«¯å¯¹äºè¯·æ±‚æ•°æ®çš„å±•ç¤ºä¼šè¿ç»­ä¸æ–­æ›´æ–°ï¼Œè¿™æœŸé—´ä¼šå¯¼è‡´é¡µé¢ä¸­æ¸²æŸ“å‡ºæ¥çš„æç¤ºå†…å®¹ä¸ç¨³å®šï¼›åŒæ—¶è¿ç»­ä¸æ–­çš„è¯·æ±‚æ¥å£ä¹Ÿä¼šå¢åŠ æœåŠ¡å™¨æ¥å£å¤„ç†çš„å‹åŠ›ã€‚</p><p>JS é˜²æŠ–çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œå¯¹äºè¿ç»­è°ƒç”¨å‡½æ•°çš„æƒ…å†µï¼Œæœ€åé™åˆ¶åªä¼šçœŸæ­£æ‰§è¡Œä¸€æ¬¡å‡½æ•°ã€‚æ‰€ä»¥è¦å¯¹ä¸€ä¸ªå‡½æ•°è¿›è¡Œé˜²æŠ–é™åˆ¶ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ­¥éª¤ï¼š</p><ul><li>é¦–å…ˆåœ¨åŸå‡½æ•°å†…éƒ¨åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨<code>setTimeout</code>ï¼Œè®¾ç½®ç»è¿‡ä¸€å®šå»¶è¿Ÿåæ‰§è¡Œå‡½æ•°</li><li><strong>åœ¨æ¯æ¬¡æ‰§è¡Œå‡½æ•°çš„æ—¶å€™ï¼Œæ¸…é™¤ä¸Šä¸€æ¬¡è®¾ç½®çš„å®šæ—¶å™¨ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨</strong>ï¼›å¦‚æœæ˜¯çŸ­æ—¶é—´å†…è¿ç»­è°ƒç”¨çš„æƒ…å†µï¼Œé€šè¿‡æ¸…é™¤ä¸Šä¸€æ¬¡è®¾ç½®çš„å®šæ—¶å™¨æ¥ä¿è¯å§‹ç»ˆåªä¼šæ‰§è¡Œæœ€åä¸€æ¬¡è®¾ç½®çš„å®šæ—¶å™¨ä¸­çš„å›è°ƒå‡½æ•°</li></ul><div class="playgroundContainer_g1X1"><div class="playgroundHeader_nN+J">Live Editor</div><div class="playgroundEditor_smcs" style="position:relative;text-align:left;box-sizing:border-box;padding:0;overflow:hidden;white-space:pre;font-family:monospace;color:#F8F8F2;background-color:#282A36"><textarea style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:absolute;top:0;left:0;height:100%;width:100%;resize:none;color:inherit;overflow:hidden;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-text-fill-color:transparent;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px" class="npm__react-simple-code-editor__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false">class extends Component {
  state = {
    text: &#x27;&#x27;,
  };

  debouncedHandleInput = e =&gt; {
    e.persist();
    clearTimeout(this.timerId);
    this.timerId = setTimeout(() =&gt; {
      this.setState({
        text: e.target.value,
      });
    }, 500);
  };

  render() {
    return (
      &lt;div&gt;
        &lt;input onInput={this.debouncedHandleInput} /&gt;
        &lt;p&gt;{this.state.text}&lt;/p&gt;
      &lt;/div&gt;
    );
  }
}</textarea><pre aria-hidden="true" style="margin:0;border:0;background:none;box-sizing:inherit;display:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-variant-ligatures:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;tab-size:inherit;text-indent:inherit;text-rendering:inherit;text-transform:inherit;white-space:pre-wrap;word-break:keep-all;overflow-wrap:break-word;position:relative;pointer-events:none;padding-top:10px;padding-right:10px;padding-bottom:10px;padding-left:10px"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">extends</span><span class="token plain"> Component </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  state </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    text</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">debouncedHandleInput</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token parameter">e</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">persist</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">clearTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">timerId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setState</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        text</span><span class="token operator">:</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">500</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">render</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">input</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">onInput</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token tag script language-javascript keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token tag script language-javascript" style="color:rgb(255, 121, 198)">debouncedHandleInput</span><span class="token tag script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">p</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">text</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">p</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></pre><style>
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div><div class="playgroundHeader_nN+J">Result</div><div class="playgroundPreview_tBjT"><div>Loading...</div></div></div><p>ä¸ºäº†å¤ç”¨é˜²æŠ–çš„é€»è¾‘ï¼Œå¯ä»¥å°è£…ä¸€ä¸ªé«˜çº§å‡½æ•°ï¼Œæ ¹æ®æŒ‡å®šå»¶è¿Ÿæ‰§è¡Œæ—¶é—´å’ŒæŒ‡å®šå‡½æ•°æ¥ç”Ÿæˆä¸€ä¸ªé˜²æŠ–å‡½æ•°ã€‚</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">debounced</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">fn</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> timeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">clearTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    timerId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> timeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="ç²¾å‡†é˜²æŠ–">ç²¾å‡†é˜²æŠ–<a class="hash-link" href="#ç²¾å‡†é˜²æŠ–" title="Direct link to heading">â€‹</a></h3><p>å¯¹äºé˜²æŠ–å‡½æ•°æœ‰ä¸€ä¸ªå¸¸è§çš„å†²çªå°±æ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨æ˜¯å¦è¦ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œä¾‹å¦‚ä¸Šé¢çš„<code>input</code>äº‹ä»¶ï¼Œåœ¨æˆ‘ä»¬è¾“å…¥ç¬¬ä¸€ä¸ªå­—ç¬¦çš„æ—¶å€™æ˜¯å¦è¦å»ç«‹å³æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œæ¥ä¸‹æ¥çš„è¾“å…¥æ‰å»ä½¿ç”¨é˜²æŠ–æ§åˆ¶å…¶åªæ‰§è¡Œæœ€åä¸€æ¬¡ã€‚ä¸ºæ­¤æˆ‘ä»¬éœ€è¦åœ¨é«˜é˜¶å‡½æ•°çš„å‚æ•°ä¸­åŠ ä¸Šä¸€ä¸ªå‚æ•°<code>immediate</code></p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">debounced</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">fn</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> timeout</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> immediate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// åˆ¤æ–­æ˜¯å¦ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œè¿™ä¸€æ­¥å¿…é¡»è¦ä¸‹é¢çš„timerId = nullæ¥é…åˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">immediate </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token operator">!</span><span class="token plain">timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ¸…é™¤ä¸Šä¸€æ¬¡çš„å®šæ—¶ä»»åŠ¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">clearTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    timerId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ¸…é™¤æœ€åçš„å®šæ—¶å™¨Id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      timerId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> timeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="èŠ‚æµ">èŠ‚æµ<a class="hash-link" href="#èŠ‚æµ" title="Direct link to heading">â€‹</a></h3><blockquote><p><a href="https://www.lodashjs.com/docs/lodash.throttle" target="_blank" rel="noopener noreferrer">lodash.throttle</a></p><p><a href="https://github.com/jashkenas/underscore/blob/master/modules/throttle.js" target="_blank" rel="noopener noreferrer">underscore- throttle</a></p></blockquote><p>throttleï¼ŒèŠ‚æµï¼Œä»ç”Ÿæ´»çš„è§’åº¦çœ‹ï¼Œå°±æ˜¯è®©ç”·æ€§åŒèƒçœç€ç‚¹èŠ±é’±ï¼Œå¦åˆ™ä¼šè¢«å¥³æœ‹å‹é”¤ã€‚è€Œæ”¾åœ¨å‰ç«¯é¢†åŸŸå†…ï¼Œç»å¸¸é‡åˆ°çš„æƒ…å†µæ˜¯ï¼ŒæŸäº› DOM äº‹ä»¶ä¼šåœ¨æ²¡æœ‰é—´éš”çš„æƒ…å†µä¸‹åå¤è§¦å‘ï¼Œä¾‹å¦‚é¡µé¢çš„<code>scroll</code>äº‹ä»¶ï¼ŒçŸ­æœŸå†…æ»šåŠ¨é¼ æ ‡æ»šè½®å¯èƒ½ç«‹å³é€ æˆä¸Šç™¾æ¬¡çš„<code>onScroll</code>äº‹ä»¶è§¦å‘ï¼Œè€Œä¸Šæ–‡è¯´è¿‡ï¼Œè¿™äº› DOM äº‹ä»¶éƒ½ä¼šè¢«æ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰åˆ°æ‰§è¡Œï¼Œå¦‚æœä¸åŠ ä»¥é™åˆ¶ï¼Œä¼šé€ æˆä»»åŠ¡é˜Ÿåˆ—å ç”¨å†…å­˜ç©ºé—´å¢åŠ ï¼ŒåŒæ—¶ä¹Ÿå½±å“å…¶å®ƒä»»åŠ¡é˜Ÿåˆ—ä¸­ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚</p><p>èŠ‚æµçš„æ€æƒ³å…¶å®æ˜¯åœ¨é˜²æŠ–çš„åŸºç¡€ä¸Šæ”¾æ¾ä¸€ç‚¹é™åˆ¶ï¼Œé˜²æŠ–é™åˆ¶ä¸€æ®µæ—¶é—´å†…è¿ç»­è°ƒç”¨çš„è¯æœ€ååªä¼šæ‰§è¡Œä¸€æ¬¡å‡½æ•°ï¼ŒèŠ‚æµæ˜¯åœ¨ä¸€æ®µæ—¶é—´å†…è¿ç»­è°ƒç”¨çš„è¯ï¼Œæ§åˆ¶å‡½æ•°åœ¨è¿™æœŸé—´æ¯éš”ä¸€å®šçš„å»¶è¿Ÿæ‰å»æ‰§è¡Œï¼Œè€Œä¸æ˜¯åå¤æ— é—´éš”æ‰§è¡Œã€‚</p><p>è¦å®ç°å‡½æ•°èŠ‚æµæ‰§è¡Œï¼Œä¸€ç§æ€è·¯æ˜¯éœ€è¦è®°å½•ä¸Šä¸€æ¬¡å‡½æ•°æ‰§è¡Œçš„æ—¶é—´æˆ³ï¼Œæ¯ä¸€æ¬¡æ‰§è¡Œå‡½æ•°å’Œä¸Šæ¬¡æ‰§è¡Œæ—¶é—´è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœå°äºé™åˆ¶çš„å»¶è¿Ÿæ—¶é—´ï¼Œå°±ä¸äºˆæ‰§è¡Œï¼Œå¦‚æœå¤§äºå»¶è¿Ÿæ—¶é—´ï¼Œå°±æ‰§è¡Œå¹¶ä¸”æ›´æ–°æ‰§è¡Œæ—¶é—´ã€‚</p><p>å¦ä¸€ç§æ€è·¯æ˜¯ç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ©ç”¨<code>setTimeout</code>è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œ<strong>ç­‰å¾…å»¶è¿Ÿæ—¶é—´åè‡ªåŠ¨æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå¹¶åœ¨å›è°ƒå‡½æ•°å†…éƒ¨æ¸…é™¤è®¾ç½®çš„å®šæ—¶å™¨ Id</strong>ï¼Œä»¥åæ¯æ¬¡æ‰§è¡Œæ ¹æ®å®šæ—¶å™¨ Id æ£€æŸ¥å®šæ—¶å™¨æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±ä¸åšä»»ä½•æ“ä½œï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è®¾ç½®ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ã€‚</p><p>ä»ç„¶å¯ä»¥åˆ©ç”¨ä¸€ä¸ªé«˜é˜¶å‡½æ•°æ ¹æ®æŒ‡å®šå»¶è¿Ÿæ—¶é—´å’ŒæŒ‡å®šå‡½æ•°ç”Ÿæˆä¸€ä¸ªèŠ‚æµå‡½æ•°ï¼š</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// åˆ©ç”¨æ—¶é—´æˆ³</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">throttled</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">fn</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> delay</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç¬¬ä¸€æ¬¡æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> lastInvokeTime </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> timeConsumed </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> lastInvokeTime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">timeConsumed </span><span class="token operator">&gt;=</span><span class="token plain"> delay</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ›´æ–°å½“å‰æ‰§è¡Œæ—¶é—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      lastInvokeTime </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// åˆ©ç”¨setTimeout</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">throttled</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">fn</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> timeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">!</span><span class="token plain">timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      timerId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        timerId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> timeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="ç²¾å‡†èŠ‚æµ">ç²¾å‡†èŠ‚æµ<a class="hash-link" href="#ç²¾å‡†èŠ‚æµ" title="Direct link to heading">â€‹</a></h3><p>å¦‚æœæ€»ç»“ä¸€ä¸‹ä¸Šè¿°ä¸¤ç§å®ç°èŠ‚æµå‡½æ•°çš„ä¸åŒç‚¹ï¼Œä¼šå‘ç°ï¼š</p><ul><li>åˆ©ç”¨æ—¶é—´æˆ³æ–¹å¼æ§åˆ¶æ›´åŠ ç²¾ç¡®ï¼Œ<code>setTimeout</code>å®é™…æ‰§è¡Œçš„æ—¶é—´éœ€è¦ç®—ä¸Š CPU å»¶è¿Ÿï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸­å…¶å®ƒä»»åŠ¡æ‰§è¡Œçš„æ—¶é—´ç­‰ï¼Œå¹¶ä¸”æ—¶é—´æˆ³æ–¹å¼çš„æ§åˆ¶å¯ä»¥ä¿è¯é¦–æ¬¡è°ƒç”¨å°±ç«‹å³æ‰§è¡Œï¼›</li><li>åˆ©ç”¨<code>setTimeout</code>çš„æ–¹å¼æ›´ä¸ºç®€æ´ï¼Œ<code>setTimeout</code>ä¸èƒ½ä¿è¯é¦–æ¬¡è°ƒç”¨ç«‹å³æ‰§è¡Œï¼Œä½†æ˜¯<code>setTimeout</code>æ€»æ˜¯èƒ½ä¿è¯èŠ‚æµä¹‹åä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œç±»ä¼¼äºé˜²æŠ–çš„æ•ˆæœã€‚</li></ul><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">throttled</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">fn</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> delay</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> lastInvokeTime </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä¿è¯ç«‹å³æ‰§è¡Œä¸€æ¬¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> timeout </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> lastInvokeTime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">timeout </span><span class="token operator">&gt;=</span><span class="token plain"> delay</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      lastInvokeTime </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// è¿™éƒ¨åˆ†æ˜¯ä¿è¯æœ€åæ‰§è¡Œä¸€æ¬¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">clearTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      timerId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        lastInvokeTime </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        timerId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> delay</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä¸ºæ­¤ï¼ŒèŠ‚æµå‡½æ•°ä¸­å¼•å…¥<code>leading</code>å’Œ<code>trailing</code>ä¸¤ä¸ªæ¦‚å¿µï¼š</p><ul><li><code>leading</code>ï¼šæ ‡è¯†é¦–æ¬¡è°ƒç”¨ç«‹å³æ‰§è¡Œå‡½æ•°</li><li><code>trailing</code>ï¼šæ ‡è¯†èŠ‚æµä¹‹åå†é¢å¤–è§¦å‘ä¸€æ¬¡å‡½æ•°æ‰§è¡Œï¼Œç±»ä¼¼äºé˜²æŠ–çš„æ•ˆæœ</li></ul><p>è¦å®ç°<code>leading</code>å’Œ<code>trailing</code>çš„æ•ˆæœï¼Œé™¤äº†éœ€è¦æ·»åŠ é¢å¤–çš„å‚æ•°æ§åˆ¶ï¼Œè¿˜éœ€è¦å°†ä¸Šè¿°ä¸¤ç§å®ç°ç›¸ç»“åˆï¼š</p><ul><li>åˆ©ç”¨æ—¶é—´æˆ³æ¥æ§åˆ¶æ‰§è¡Œè§„å¾‹ï¼Œå¹¶æ ¹æ®<code>leading</code>åˆ¤æ–­é¦–æ¬¡è°ƒç”¨æ˜¯å¦ç«‹å³æ‰§è¡Œå‡½æ•°ï¼›</li><li>åˆ©ç”¨<code>setTimeout</code>æ ¹æ®<code>trailing</code>ä¿è¯æœ€åæ‰§è¡Œä¸€æ¬¡</li></ul><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">throttled</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">fn</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> delay</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> leading </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter boolean">true</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> trailing </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> lastInvokeTime </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">!</span><span class="token plain">lastInvokeTime </span><span class="token operator">&amp;&amp;</span><span class="token plain"> leading </span><span class="token operator">===</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      lastInvokeTime </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> timeout </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> lastInvokeTime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">timeout </span><span class="token operator">&gt;=</span><span class="token plain"> delay</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      lastInvokeTime </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">trailing</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¦‚æœè®¾ç½®trailingï¼Œæ¯æ¬¡å¿…é¡»è¦æ¸…é™¤ä¸Šä¸€æ¬¡è®¾ç½®çš„å®šæ—¶å™¨ï¼Œç±»ä¼¼äºé˜²æŠ–çš„åŸç†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">clearTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">timerId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      timerId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// è¿™é‡Œéœ€è¦æ ¹æ®æ˜¯å¦ç«‹å³æ‰§è¡Œæ¥è®¾ç½®æœ€åæ‰§è¡Œæ—¶é—´æˆ³</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        lastInvokeTime </span><span class="token operator">=</span><span class="token plain"> leading </span><span class="token operator">?</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        timerId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> delay</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="requestanimationframe">requestAnimationFrame<a class="hash-link" href="#requestanimationframe" title="Direct link to heading">â€‹</a></h2><blockquote><p><code>const animationId = window.requestAnimationFrame(callback)</code></p><p><code>window.cancelAnimationFrame(animationId)</code></p></blockquote><p>åœ¨è¿‡å» CSS è¿˜ä¸æ˜¯å¤ªå‘è¾¾çš„æ—¶å€™ï¼Œåˆ©ç”¨ JS çš„<code>setTimeout</code>æˆ–è€…<code>setInterval</code>æ¥åšåŠ¨ç”»å¤šä¸€ç‚¹ã€‚å¤§å¤šæ•°æ™®é€šæ˜¾ç¤ºå™¨çš„å±å¹•åˆ·æ–°ç‡éƒ½åœ¨ 60Hzï¼Œä¹Ÿå°±æ˜¯æ¯ç§’å‘ˆç° 60 å¸§ç”»é¢ï¼Œå¯ä»¥è®¡ç®—å‡ºæ¯å¸§ç”»é¢çš„é—´éš”æ—¶é—´ä¸ºï¼š</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>1000</mn><mi>m</mi><mi>s</mi><mi mathvariant="normal">/</mi><mn>60</mn><mo>=</mo><mn>16.66666</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">1000ms / 60 = 16.66666ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord">/</span><span class="mord">6</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">.</span><span class="mord">6</span><span class="mord">6</span><span class="mord">6</span><span class="mord">6</span><span class="mord">6</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span></div><p>ä¹Ÿå°±æ˜¯æ˜¾ç¤ºå™¨åœ¨ç»˜åˆ¶å‡ºä¸Šä¸€å¸§ç”»é¢ä¹‹åï¼Œæœ€å¿«éœ€è¦ç»è¿‡ä¸Šé¢çš„æ—¶é—´é—´éš”æ‰èƒ½ç»˜åˆ¶å‘ˆç°ä¸‹é¢çš„ä¸€å¸§ç”»é¢ã€‚è€ŒåŸºäº<code>setTimeout</code>ç­‰å®šæ—¶å™¨ä»»åŠ¡è¿›åˆ¶ç»˜åˆ¶çš„ç”»é¢ï¼Œå¦‚æœæƒ³æŒ‡å®šæ›´é«˜åˆ·æ–°ç‡çš„åŠ¨ç”»ï¼Œä¸èƒ½ä½äº<code>16.66666ms</code>è¿™ä¸ªæ—¶é—´äº†ï¼Œå³ä½¿ä½äºè¿™ä¸ªæ—¶é—´æ˜¾ç¤ºå™¨ä¹Ÿæ²¡åŠæ³•å‘ˆç°ä¸­é—´çš„ç”»é¢ã€‚å¹¶ä¸”<code>setTimeout</code>ç­‰å®šæ—¶å™¨ä»»åŠ¡æœ¬èº«è¿˜è¦å—åˆ°äº‹ä»¶å¾ªç¯æœºåˆ¶çš„é™åˆ¶ï¼Œéœ€è¦åœ¨ä»»åŠ¡é˜Ÿåˆ—ç­‰å¾…æ‰§è¡Œï¼Œæ‰€ä»¥ç”¨å®šæ—¶å™¨åšå‡ºæ¥çš„åŠ¨ç”»æ²¡æœ‰ç¨³å®šå’Œå¹³æ»‘çš„æ•ˆæœã€‚</p><p><code>requestAnimationFrame</code>æ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°ä¼šæ¥å—ä¸€ä¸ªæ—¶é—´æˆ³ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”è¯¥æ—¶é—´æˆ³çš„ç²¾åº¦å€¼å¯ä»¥ç²¾ç¡®åˆ° 5Î¼sï¼ˆå¾®ç§’ï¼‰ã€‚</p><p><img alt="image-20200824171500907" src="data:image/png;base64,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"></p><p>è¯¥å›è°ƒå‡½æ•°ä¼šåœ¨æµè§ˆå™¨çš„äº‹ä»¶äº‹ä»¶å¾ªç¯çš„æ›´æ–°æ¸²æŸ“çš„ä¸€æ­¥ä¸­è¢«è°ƒç”¨ï¼Œå…·ä½“è§ â€”â€” <a href="https://html.spec.whatwg.org/multipage/webappapis.html#update-the-rendering" target="_blank" rel="noopener noreferrer">update-the-rendering ç¬¬ 12 æ­¥</a>ï¼Œé€šä¿—æ¥è®²å°±æ˜¯ä¸‹æ¬¡ä¸€é‡ç»˜ä¹‹å‰ä¼šè°ƒç”¨å›è°ƒå‡½æ•°ï¼Œæ‰€ä»¥<code>requestAnimationFrame</code>æ€»èƒ½ä¿è¯æ¯æ¬¡æ‰§è¡Œå›è°ƒå‡½æ•°çš„æ—¶é—´é—´éš”å’Œæµè§ˆå™¨çš„åˆ·æ–°é¢‘ç‡ä¿æŒä¸€è‡´ï¼Œä»æ­¤ä¸ç”¨æ‹…å¿ƒåº”è¯¥ä¸ºåŠ¨ç”»é—´éš”æŒ‡å®šå¤šå°‘å»¶è¿Ÿæ—¶é—´è€Œæ„Ÿåˆ°ç„¦è™‘äº†ã€‚</p><p>ä» whatwg çš„è§„èŒƒæ¥çœ‹ï¼Œæ¯ä¸€ä¸ªé¡µé¢å®é™…ä¸Šæœ‰ä¸€ä¸ª<code>map</code>ç»“æ„ç”¨æ¥ä¿å­˜æ¯æ¬¡é€šè¿‡<code>requestAnimationFrame</code>è®¾ç½®çš„å›è°ƒå‡½æ•°ï¼Œè§ â€”â€” <a href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#dom-animationframeprovider-requestanimationframe" target="_blank" rel="noopener noreferrer"><strong>run requestAnimationFrame</strong></a>ï¼Œè€Œåˆ°äº‹ä»¶å¾ªç¯æœºåˆ¶ä¸­å»éœ€è¦å»æ‰§è¡Œ<code>requestAnimationFrame</code>è®¾ç½®çš„å›è°ƒå‡½æ•°çš„æ—¶å€™ï¼Œä¼šéå†<code>map</code>ï¼Œå–å‡ºå›è°ƒå‡½æ•°æ‰§è¡Œï¼Œè§ â€”â€” <a href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#run-the-animation-frame-callbacks" target="_blank" rel="noopener noreferrer"><strong>run the animation frame callback</strong></a>ã€‚</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wood3n/icodex-next/tree/master/docs/javascript/æ€§èƒ½ä¼˜åŒ–/å®šæ—¶å™¨æœºåˆ¶.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/javascript/å‡½æ•°/é«˜é˜¶å‡½æ•°"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">é«˜çº§å‡½æ•°</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/javascript/ç±»å‹/æ“ä½œç¬¦ç±»å‹è½¬æ¢"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">æ“ä½œç¬¦</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#timers" class="table-of-contents__link toc-highlight">Timers</a><ul><li><a href="#in-parallel" class="table-of-contents__link toc-highlight">in parallel</a></li><li><a href="#settimeout" class="table-of-contents__link toc-highlight">setTimeout</a></li><li><a href="#ç”¨-settimeout-å®ç°-setinterval" class="table-of-contents__link toc-highlight">ç”¨ setTimeout å®ç° setInterval</a></li><li><a href="#é˜²æŠ–" class="table-of-contents__link toc-highlight">é˜²æŠ–</a></li><li><a href="#ç²¾å‡†é˜²æŠ–" class="table-of-contents__link toc-highlight">ç²¾å‡†é˜²æŠ–</a></li><li><a href="#èŠ‚æµ" class="table-of-contents__link toc-highlight">èŠ‚æµ</a></li><li><a href="#ç²¾å‡†èŠ‚æµ" class="table-of-contents__link toc-highlight">ç²¾å‡†èŠ‚æµ</a></li></ul></li><li><a href="#requestanimationframe" class="table-of-contents__link toc-highlight">requestAnimationFrame</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.bc1968d0.js"></script>
<script src="/assets/js/main.84a75bf0.js"></script>
</body>
</html>