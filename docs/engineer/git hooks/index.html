<!doctype html>
<html class="docs-version-current" lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="icodex RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="icodex Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-153188913-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-153188913-1",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="icodex" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">git hook构建代码规范 | icodex</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://icodex.me/docs/engineer/git hooks"><meta data-react-helmet="true" name="docsearch:language" content="zh-CN"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="keywords" content="frontend, react, javascript, css, react, vue, typescript, docusaurus, blog, personal blog, personal website"><meta data-react-helmet="true" property="og:title" content="git hook构建代码规范 | icodex"><meta data-react-helmet="true" name="description" content="git hook"><meta data-react-helmet="true" property="og:description" content="git hook"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://icodex.me/docs/engineer/git hooks"><link data-react-helmet="true" rel="alternate" href="https://icodex.me/docs/engineer/git hooks" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://icodex.me/docs/engineer/git hooks" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://GMKEEJO8X4-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.83facce5.css">
<link rel="preload" href="/assets/js/runtime~main.bc1968d0.js" as="script">
<link rel="preload" href="/assets/js/main.84a75bf0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="icodex" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="icodex" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">icodex</b></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a class="navbar__item navbar__link" href="/pages/project">My Project</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link">Skill</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/javascript/类型/类型定义">JavaScript</a></li><li><a class="dropdown__link" href="/docs/css/CSS代码规范">CSS</a></li><li><a class="dropdown__link" href="/docs/typescript/tsconfig">TypeScript</a></li><li><a class="dropdown__link" href="/docs/react/hooks/常用hooks">React</a></li><li><a class="dropdown__link" href="/docs/nodejs/awesome-nodejs">NodeJS</a></li><li><a class="dropdown__link navbar__link--active" href="/docs/engineer/">Engineer</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/network/网速与带宽">Network</a></li><li><a class="dropdown__link" href="/docs/algorithm/算法分析">Algorithm</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/tools/git">Tool</a><a href="https://github.com/wood3n/icodex-next" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0 sidebarWithHideableNavbar_VlPv"><a tabindex="-1" class="sidebarLogo_hmkv" href="/"><img src="/img/logo.png" alt="icodex" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="icodex" class="themedImage_TMUO themedImage--dark_uzRr"><b>icodex</b></a><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/engineer/ESLint">ESLint的使用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/engineer/git hooks">git hook构建代码规范</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/engineer/">前端工程化体系工具</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/engineer/跨域解决方式">跨域与解决方案</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/engineer/Babel/babel plugin编写">Babel</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/webpack5">webpack5配置</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/engineer/webpack优化/webpack优化（1）">webpack优化</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/webpackinner">webpack原理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/engineer/使用yeoman搭建脚手架/脚手架搭建（1）">使用yeoman搭建脚手架</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/engineer/基于webpack搭建react项目/搭建React项目（1）">基于webpack搭建react项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/engineer/模块语法/CSS模块语法">模块语法</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>git hook构建代码规范</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="git-hook">git hook<a class="hash-link" href="#git-hook" title="Direct link to heading">​</a></h2><p>关于 <a href="https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90" target="_blank" rel="noopener noreferrer">git hook</a> ，在 git 官方文档中介绍的很详细，简而言之就是在执行 git 命令的时候自动触发的脚本命令。git hook 分为两种：</p><ul><li>客户端，主要是本地执行<code>git commit</code>等命令时执行的 hook；</li><li>服务端，主要用于服务器接收到<code>git push</code>等命令推送的代码以后执行的命令，比较常见的就是 CI/CD 的自动化工作流；</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="如何使用">如何使用<a class="hash-link" href="#如何使用" title="Direct link to heading">​</a></h2><p>git hook 都被以脚本的形式存储在项目内的<code>.git/hooks</code>目录下，如果是新项目使用 <code>git init</code> 初始化一个新版本库时，Git 默认会在这个目录中放置一些示例脚本，这些示例脚本统一使用<code>.sample</code>后缀，可以在 vscode 等编辑器中打开，如果要启用这些示例脚本的化，需要去掉<code>sample</code>后缀。</p><p><img alt="image-20201122195535082" src="/assets/images/image-20201122195535082-d31077af4f4b216661cafc4db25b8ff7.png"></p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="客户端-hook">客户端 hook<a class="hash-link" href="#客户端-hook" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="pre-commit">pre-commit<a class="hash-link" href="#pre-commit" title="Direct link to heading">​</a></h4><p>最为常用的一个客户端 hook 就是<code>pre-commit</code>，这个 hook 命令会在执行<code>git commit</code>之后运行，所以最常用的功能就是配合代码检查工具来使用，这样不规范的代码就无法提交。不过可以用 <code>git commit --no-verify</code> 来绕过这个环节。</p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="prepare-commit-msg">prepare-commit-msg<a class="hash-link" href="#prepare-commit-msg" title="Direct link to heading">​</a></h4><p><code>prepare-commit-msg</code>会在启动提交信息编辑器之前触发，也就是可以利用它来自定义默认<code>git commit</code>的<code>message</code>的格式，这个 hook 应该在一些提交规范严格的团队中比较常用。</p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="post-merge">post-merge<a class="hash-link" href="#post-merge" title="Direct link to heading">​</a></h4><p><code>post-merge</code>会在 <code>git merge</code> 成功运行后执行</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="服务端-hook">服务端 hook<a class="hash-link" href="#服务端-hook" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="pre-receive">pre-receive<a class="hash-link" href="#pre-receive" title="Direct link to heading">​</a></h4><p><code>pre-receive</code>会在服务端接收到推送的代码以后触发，这个 hook 一般用来进行代码语法等低级错误的检测，如果<code>pre-receive</code>返回非<code>0</code>的值，则当前的 push 操作会被拒绝。</p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="post-receive">post-receive<a class="hash-link" href="#post-receive" title="Direct link to heading">​</a></h4><p><code>post-receive</code>会在<code>git push</code>，检查代码错误等前面一系列操作通过后执行，所以主要用来触发 CI/CD 的自动化工作流程，或者给代码库作者发送邮件等。</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="eslint">ESLint<a class="hash-link" href="#eslint" title="Direct link to heading">​</a></h2><p>将 ESLint 和 git hook 结合进行代码规范检查可以极大的约束团队的代码规范，在开发环境解决代码提交不规范的问题，既有助于形成个人良好的代码风格，也有助于提高代码 CR 的效率，避免代码提交以后 CR 时出现代码规范上的低级错误。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="安装-pre-commit">安装 pre-commit<a class="hash-link" href="#安装-pre-commit" title="Direct link to heading">​</a></h3><p>首先安装<code>pre-commit</code>这个 hook，安装完以后，会自动在上面介绍的<code>.git/hooks</code>目录下生成一个<code>pre-commit</code>文件。</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">yarn</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> pre-commit -D</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="安装-eslint-等工具">安装 ESLint 等工具<a class="hash-link" href="#安装-eslint-等工具" title="Direct link to heading">​</a></h3><p>安装 ESLint，<code>eslint-plugin-react</code>，<code>@typescript-eslint/eslint-plugin</code>等系列插件</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">yarn</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> eslint eslint-plugin-react @typescript-eslint/parser @typescript-eslint/eslint-plugin -D</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>简单配置一下<code>.eslintrc.js</code>文件，实现对项目<code>JSX</code>，<code>TSX</code>等代码的检查</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  env</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    browser</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    es2020</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    node</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  parser</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@typescript-eslint/parser&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@typescript-eslint&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">extends</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;eslint:recommended&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;plugin:react/recommended&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;plugin:@typescript-eslint/eslint-recommended&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;plugin:@typescript-eslint/recommended&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  settings</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    react</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      version</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;detect&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="配置packagejson">配置<code>package.json</code><a class="hash-link" href="#配置packagejson" title="Direct link to heading">​</a></h3><p>在<code>package.json</code>文件的<code>scripts</code>属性中写入 ESLint 内置支持的执行命令以及<code>pre-commit</code> hook 执行以后触发的命令</p><div class="codeBlockContainer_J+bg language-json theme-code-block"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;lint&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;eslint --ext .jsx,.js,.ts,.tsx ./src  --fix ./src&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;lint&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="测试">测试<a class="hash-link" href="#测试" title="Direct link to heading">​</a></h3><p>接下来执行<code>git commit</code>以后就会自触发<code>pre-commit</code> hook，进而执行 ESLint 检查代码，如果出现不规范的地方，就会发生错误：</p><p><img alt="image-20201122221355001" src="/assets/images/image-20201122221355001-0936f2dc1915c8e00a9d55466021279e.png"></p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="其他工具">其他工具<a class="hash-link" href="#其他工具" title="Direct link to heading">​</a></h2><p>我在查询 git hook 和 ESLint 结合相关资料的时候，看到网上推荐比较多的工具是<code>husky</code>和 <a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener noreferrer"><code>lint-staged</code></a>。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="husky">husky<a class="hash-link" href="#husky" title="Direct link to heading">​</a></h3><p><a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">typicode/husky(哈士奇)</a>是一个能通过一些指定的命令自动创建 git hook 的工具，当前有两个版本可以选择，V4 版本的 husky 在安装以后能自动在项目<code>.git/hooks</code>目录下生成 git hook 文件，例如上述的 git hook 都能自动生成，并且如果把 husky 卸载掉，这些文件也会跟着删除。</p><p><img alt="image-20201122224122767" src="/assets/images/image-20201122224122767-44f178fac810febc1e41338e9d188d99.png"></p><p>要使用这些 git hook，只需要在<code>package.json</code>写入如下配置即可：</p><div class="codeBlockContainer_J+bg language-json theme-code-block"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;lint&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;eslint --ext .jsx,.js,.ts,.tsx ./src  --fix ./src&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;husky&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;hooks&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;lint&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>但是 V5 版本改动比较大，安装完以后不会自动创建 git hook 文件，如果要创建刚才的<code>pre-commit</code>这个文件，需要使用一些命令，首先需要安装哈士奇</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">yarn</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> husky@next -D</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>然后执行<code>yarn husky install</code>确保启动 git hook；最后要添加一个 hook 触发执行的命令，需要使用<code>npx husky add &lt;hookname&gt; [cmd]</code></p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">yarn</span><span class="token plain"> husky </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">npx husky </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> pre-commit </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;lint&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="lint-staged">lint-staged<a class="hash-link" href="#lint-staged" title="Direct link to heading">​</a></h3><p><code>lint-staged</code>这个工具比较人性化，它只会对使用<code>git add</code>添加到暂存区的代码进行检查。如果一个项目之前没有使用过 ESLint 这种代码约束工具，突然集成以后肯</p><p>定会发生各种报错，那些没有修改的代码等修改完了再提交就很耽误效率了，所以需要<code>lint-staged</code>这样的工具，只对修改完添加到暂存区的代码进行检查。</p><p>这个工具本身和<code>husky</code>集成一起使用非常的方便，其针对<code>husky</code>内置了<code>npx mrm lint-staged</code>这个命令，和<code>husky</code>一起安装完以后，使用这个命令就会自动在<code>package.json</code>下生成和<code>husky</code>结合的配置。</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">yarn</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> husky lint-staged -D</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 然后执行</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">npx mrm lint-staged</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img alt="image-20201123231405977" src="data:image/png;base64,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"></p><p><code>lint-staged</code>下属性名是 glob 匹配模式的文件路径，属性值是要执行的命令。</p><div class="codeBlockContainer_J+bg language-json theme-code-block"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token property">&quot;husky&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;hooks&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;lint-staged&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;*.{jsx,js,ts,tsx}&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;eslint --fix&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>然后执行<code>git commit</code>命令的执行就会触发<code>husky</code>配置的 hook</p><p><img alt="image-20201123231915237" src="/assets/images/image-20201123231915237-2cd72b56d31112ea19d6ffc233b7d614.png"></p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="standard">standard<a class="hash-link" href="#standard" title="Direct link to heading">​</a></h3><p><a href="https://github.com/standard/standard/blob/master/docs/README-zhcn.md" target="_blank" rel="noopener noreferrer">standard/README-zhcn.md at master · standard/standard (github.com)</a>就比较厉害了，号称 JavaScript 代码规范，自带 linter &amp; 代码自动修正，具有以下特点：</p><ul><li><strong>无须配置。</strong> 不用维护 <code>.eslintrc</code>等配置文件</li><li><strong>自动代码格式化。</strong> 只需运行 <code>standard --fix</code> 从此和脏乱差的代码说再见</li></ul><p>在<code>standard</code>中使用的 JS 代码规范也比较多，见 —— <a href="https://github.com/standard/standard/blob/master/docs/RULES-zhcn.md#javascript-standard-style" target="_blank" rel="noopener noreferrer">JavaScript Standard Style</a>，大部分在 ESLint 中都有对应的规则。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wood3n/icodex-next/tree/master/docs/engineer/git hooks.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/engineer/ESLint"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ESLint的使用</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/engineer/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">前端工程化体系工具</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#git-hook" class="table-of-contents__link toc-highlight">git hook</a></li><li><a href="#如何使用" class="table-of-contents__link toc-highlight">如何使用</a><ul><li><a href="#客户端-hook" class="table-of-contents__link toc-highlight">客户端 hook</a></li><li><a href="#服务端-hook" class="table-of-contents__link toc-highlight">服务端 hook</a></li></ul></li><li><a href="#eslint" class="table-of-contents__link toc-highlight">ESLint</a><ul><li><a href="#安装-pre-commit" class="table-of-contents__link toc-highlight">安装 pre-commit</a></li><li><a href="#安装-eslint-等工具" class="table-of-contents__link toc-highlight">安装 ESLint 等工具</a></li><li><a href="#配置packagejson" class="table-of-contents__link toc-highlight">配置<code>package.json</code></a></li><li><a href="#测试" class="table-of-contents__link toc-highlight">测试</a></li></ul></li><li><a href="#其他工具" class="table-of-contents__link toc-highlight">其他工具</a><ul><li><a href="#husky" class="table-of-contents__link toc-highlight">husky</a></li><li><a href="#lint-staged" class="table-of-contents__link toc-highlight">lint-staged</a></li><li><a href="#standard" class="table-of-contents__link toc-highlight">standard</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.bc1968d0.js"></script>
<script src="/assets/js/main.84a75bf0.js"></script>
</body>
</html>